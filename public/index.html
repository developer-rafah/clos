<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Clos | Ø¬Ù…Ø¹ÙŠØ© Ø±ÙØ§Ù‡</title>

  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#0e0b14">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.svg">

  <!-- Ø¹Ù†Ø¯Ùƒ ØºØ§Ù„Ø¨Ù‹Ø§: /assets/css/app.css -->
  <link rel="stylesheet" href="/assets/css/app.css">

  <style>
    /* Ø¶Ù…Ø§Ù† ØªÙˆØ§ÙÙ‚ Ø§Ù„ØªØ§Ø¨Ù„Øª + Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© */
    html, body { height: 100%; }
    body { margin: 0; }
    .appShell { min-height: 100vh; display: flex; flex-direction: column; }
    .mainArea { flex: 1; min-height: 0; } /* Ù…Ù‡Ù… Ù„Ù„Ù€ iframe */
    .hidden { display: none !important; }

    /* iframe fullscreen Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
    .iframeWrap { height: 100%; }
    .iframeWrap iframe {
      width: 100%;
      height: 100%;
      border: 0;
      border-radius: 14px;
      background: rgba(255,255,255,.04);
    }

    /* Ø´Ø§Ø´Ø© ØªØ­Ù…ÙŠÙ„ Ø¨Ø³ÙŠØ·Ø© */
    .loadingBox {
      height: 100%;
      display: grid;
      place-items: center;
      padding: 18px;
      opacity: .85;
      font-family: Tajawal, Arial, sans-serif;
    }

    /* ØµÙ†Ø¯ÙˆÙ‚ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¨Ø³ÙŠØ· (Ø¥Ù† CSS Ù…Ø´Ø±ÙˆØ¹Ùƒ ÙŠØºØ·ÙŠÙ‡ Ù…Ù…ØªØ§Ø²ØŒ Ù‡Ø°Ø§ Ø§Ø­ØªÙŠØ§Ø·ÙŠ) */
    .loginCard {
      max-width: 520px;
      margin: 24px auto;
      padding: 18px;
      border-radius: 16px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      font-family: Tajawal, Arial, sans-serif;
    }
    .loginCard h2 { margin: 0 0 12px; }
    .loginCard label { display:block; margin: 10px 0 6px; opacity:.9; }
    .loginCard input {
      width: 100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: #fff;
      outline: none;
      box-sizing: border-box;
    }
    .loginActions { display:flex; gap:10px; margin-top:14px; flex-wrap: wrap; }
    .btnX {
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: #fff;
      cursor: pointer;
      font-family: Tajawal, Arial, sans-serif;
    }
    .btnX.primary {
      background: #6d4cff;
      border-color: rgba(109,76,255,.45);
    }
    .errBox { margin-top: 12px; color: #ffb4b4; opacity:.95; white-space: pre-wrap; }
    .note { margin-top: 10px; opacity: .8; font-size: 13px; }
  </style>
</head>

<body class="appShell" style="background:#0e0b14;color:#fff">
  <!-- Topbar (Ù†ÙØ³ ÙÙƒØ±Ø© Ù…Ù„ÙØ§ØªÙƒ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©) -->
  <div class="container" style="padding: 12px">
    <div class="topbar" style="display:flex;align-items:center;justify-content:space-between;gap:10px">
      <div class="brand" style="display:flex;align-items:center;gap:10px">
        <div class="logo" style="width:34px;height:34px;border-radius:12px;display:grid;place-items:center;background:rgba(255,255,255,.08)">ğŸŸ£</div>
        <div>
          <b>Clos | Ø¬Ù…Ø¹ÙŠØ© Ø±ÙØ§Ù‡</b>
          <div id="whoami" style="font-size:12px;opacity:.8;margin-top:2px"></div>
        </div>
      </div>

      <div class="actions" style="display:flex;gap:8px;flex-wrap:wrap">
        <button id="btnReload" class="btnX" type="button">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
        <button id="btnLogout" class="btnX primary hidden" type="button">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
      </div>
    </div>
  </div>

  <!-- Main -->
  <div class="container mainArea" style="padding: 0 12px 12px">
    <!-- Ø´Ø§Ø´Ø© ØªØ­Ù…ÙŠÙ„ -->
    <div id="viewLoading" class="loadingBox">
      <div>... Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</div>
    </div>

    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø©) -->
    <div id="viewLogin" class="loginCard hidden">
      <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <div style="opacity:.85;margin-bottom:10px">Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©ØŒ ÙˆÙ„Ù† ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¥Ù„Ø§ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± â€œØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬â€.</div>

      <form id="loginForm">
        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
        <input id="inUser" autocomplete="username" inputmode="text" />

        <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input id="inPass" type="password" autocomplete="current-password" />

        <div class="loginActions">
          <button class="btnX primary" type="submit">Ø¯Ø®ÙˆÙ„</button>
          <button id="btnClear" class="btnX" type="button">Ù…Ø³Ø­</button>
        </div>

        <div id="loginErr" class="errBox"></div>
        <div class="note">ğŸ“Œ Ù„Ù„ØªØ«Ø¨ÙŠØª ÙƒØªØ·Ø¨ÙŠÙ‚: Ø§ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø§Ù„Ø¬ÙˆØ§Ù„ Ø«Ù… â€œAdd to Home Screenâ€.</div>
      </form>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (iframe) -->
    <div id="viewFrame" class="iframeWrap hidden" style="height:100%">
      <iframe
        id="appFrame"
        src="about:blank"
        allow="geolocation; clipboard-read; clipboard-write; notifications"
        referrerpolicy="no-referrer"
      ></iframe>
    </div>
  </div>

  <!-- Entry -->
  <script type="module" src="/assets/js/app.js"></script>
</body>
</html>
