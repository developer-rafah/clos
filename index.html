<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0B1220" />
  <link rel="manifest" href="/manifest.webmanifest" />
  <title>RAFah CLOS</title>

  <style>
    :root{
      --primary:#5E519B;      /* من الشعار */
      --accent:#B07AAE;       /* من الشعار */
      --bg:#0B1220;
      --surface:#111A2E;
      --border:#243046;
      --text:#F4F6FF;
      --muted:#B9C0D9;
      --brand-grad: linear-gradient(135deg,#5E519B 0%,#7A5BB5 45%,#B07AAE 100%);
      --shadow: 0 14px 34px rgba(0,0,0,.35);
      --radius: 16px;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Tajawal,Cairo,system-ui}
    .app{
      height:100%;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      display:flex;flex-direction:column;
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(94,81,155,.35), transparent 55%),
        radial-gradient(900px 500px at 90% 10%, rgba(176,122,174,.28), transparent 60%),
        var(--bg);
    }
    header{
      height:56px;display:flex;align-items:center;justify-content:space-between;
      padding:0 16px;
      background:rgba(17,26,46,.72);
      border-bottom:1px solid rgba(36,48,70,.7);
      backdrop-filter: blur(10px);
    }
    .title{font-weight:900;letter-spacing:.2px}
    .status{font-size:12px;color:var(--muted);font-weight:800}
    .card{
      margin:12px;
      border:1px solid rgba(36,48,70,.8);
      border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(17,26,46,.92), rgba(15,26,51,.88));
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;flex-direction:column;
      min-height: 0;
      flex: 1;
    }
    .hint{padding:10px 14px;color:var(--muted);font-size:12px;font-weight:800}
    iframe{
      flex:1;border:0;width:100%;background:#fff;
    }
    .bar{display:flex;gap:10px;padding:0 12px 12px}
    button{
      flex:1; padding:12px 14px; border-radius:14px; border:1px solid rgba(36,48,70,.8);
      background: rgba(17,26,46,.8); color:var(--text); font-weight:900; cursor:pointer;
    }
    .primary{background:var(--brand-grad); border-color:transparent; box-shadow:0 10px 22px rgba(94,81,155,.35)}
  </style>
</head>

<body>
  <div class="app">
    <header>
      <div class="title">جمعية رفحاء • CLOS</div>
      <div class="status" id="status">...</div>
    </header>

    <div class="card">
      <div class="hint" id="hint">سيتم فتح النظام. إذا طُلب منك تسجيل الدخول سيتم توجيهك تلقائيًا.</div>

      <!-- سيتم تعيين src من app.js حسب وجود session -->
      <iframe id="gasFrame" allow="clipboard-read; clipboard-write; notifications"></iframe>

      <div class="bar">
        <button class="primary" id="btnPush">تفعيل الإشعارات</button>
        <button id="btnFull">فتح بصفحة كاملة</button>
      </div>
    </div>
  </div>

  <script type="module" src="/app.js"></script>
</body>
</html>
